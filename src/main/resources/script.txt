CREATE TABLE users (
                       userID BIGSERIAL PRIMARY KEY,
                       firstName VARCHAR(255) NOT NULL,
                       lastName VARCHAR(255) NOT NULL,
                       password VARCHAR(255) NOT NULL
);
ALTER TABLE users ADD COLUMN email_address VARCHAR(255) UNIQUE;

CREATE TABLE Product (
                         id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                         name VARCHAR(255) NOT NULL,
                         price DECIMAL(19, 2) NOT NULL,
                         description VARCHAR(255) NOT NULL,
                         category VARCHAR(255) NOT NULL,
                         image BYTEA NOT NULL,
                         CONSTRAINT UK_Product_name UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS "Orders" (
                                       id BIGINT NOT NULL,
                                       order_date TIMESTAMP NOT NULL,
                                       subtotal NUMERIC(19,2) NOT NULL,
                                       userID BIGINT NOT NULL,
                                       CONSTRAINT "Order_PK" PRIMARY KEY (id),
                                       CONSTRAINT "FK_user_order" FOREIGN KEY (userID) REFERENCES users(userID)
);

CREATE TABLE order_items (
                             id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
                             order_id BIGINT NOT NULL,
                             product_id BIGINT NOT NULL,
                             quantity INTEGER NOT NULL,
                             unit_price NUMERIC(19, 2) NOT NULL,
                             FOREIGN KEY (order_id) REFERENCES orders(id),
                             FOREIGN KEY (product_id) REFERENCES products(id)
);



